{"ast":null,"code":"import _defineProperty from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/andrewkim/GA/project-2real/Movie-Application/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from'react';import{mockApi}from'./Services/mockApi';import{MovieCard}from'./shared/MovieCard.js';// import { Button } from './Shared/Button.js'\nvar Movies=/*#__PURE__*/function(_Component){_inherits(Movies,_Component);function Movies(props){var _this;_classCallCheck(this,Movies);_this=_possibleConstructorReturn(this,_getPrototypeOf(Movies).call(this,props));_this.fetchMovies=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var movies;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return mockApi.get('/allMovies');case 3:movies=_context.sent;_this.setState({movies:movies.data});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.error(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));_this.handleDeleteMovies=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(id){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:console.log(id);_context2.next=3;return mockApi.delete(\"./allMovies/\".concat(id)).then(function(){var allMovies=_this.state.movies;allMovies.splice(_this.state.movieToDelete.index,1);_this.setState({movies:allMovies});}).then(function(){_this.fetchMovies();}).catch(function(err){return console.error(err);});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.handleOpenModal=function(movie,index){return _this.setState({toDelete:true,movieToDelete:_objectSpread({},movie,{index:index})});};_this.handleCloseModal=function(){return _this.setState({toDelete:false,movieToDelete:{}});};_this.state={movies:[],movieToDelete:{},toDelete:false};return _this;}_createClass(Movies,[{key:\"componentDidMount\",value:function componentDidMount(){this.fetchMovies();}},{key:\"render\",value:function render(){var _this2=this;return this.state.movies.map(function(movie){return React.createElement(\"div\",{className:\"container\"},React.createElement(MovieCard,{key:movie.id,movie:movie,deleteFn:_this2.handleDeleteMovies}));});}}]);return Movies;}(Component);export{Movies as default};","map":{"version":3,"sources":["/Users/andrewkim/GA/project-2real/Movie-Application/src/Components/Movies.js"],"names":["React","Component","mockApi","MovieCard","Movies","props","fetchMovies","get","movies","setState","data","console","error","handleDeleteMovies","id","log","delete","then","allMovies","state","splice","movieToDelete","index","catch","err","handleOpenModal","movie","toDelete","handleCloseModal","map"],"mappings":"y0DAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,oBAAxB,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA;GAEqBC,CAAAA,M,gEACjB,gBAAYC,KAAZ,CAAmB,wCACf,wEAAMA,KAAN,GADe,MAYnBC,WAZmB,sEAYL,oLAEeJ,CAAAA,OAAO,CAACK,GAAR,CAAY,YAAZ,CAFf,QAEAC,MAFA,eAGN,MAAKC,QAAL,CAAc,CACVD,MAAM,CAAEA,MAAM,CAACE,IADL,CAAd,EAHM,+EAONC,OAAO,CAACC,KAAR,cAPM,oEAZK,SAuBnBC,kBAvBmB,2FAuBE,kBAAOC,EAAP,sHACjBH,OAAO,CAACI,GAAR,CAAYD,EAAZ,EADiB,uBAEXZ,CAAAA,OAAO,CAACc,MAAR,uBAA8BF,EAA9B,GAAoCG,IAApC,CAAyC,UAAM,CACjD,GAAMC,CAAAA,SAAS,CAAG,MAAKC,KAAL,CAAWX,MAA7B,CACAU,SAAS,CAACE,MAAV,CAAiB,MAAKD,KAAL,CAAWE,aAAX,CAAyBC,KAA1C,CAAiD,CAAjD,EACA,MAAKb,QAAL,CAAc,CAACD,MAAM,CAAEU,SAAT,CAAd,EAEH,CALK,EAMLD,IANK,CAMA,UAAI,CACN,MAAKX,WAAL,GACH,CARK,EASLiB,KATK,CASC,SAACC,GAAD,QAASb,CAAAA,OAAO,CAACC,KAAR,CAAcY,GAAd,CAAT,EATD,CAFW,yDAvBF,sEAqCnBC,eArCmB,CAqCD,SAACC,KAAD,CAAQJ,KAAR,QAClB,OAAKb,QAAL,CAAc,CAAEkB,QAAQ,CAAE,IAAZ,CAAkBN,aAAa,kBAAMK,KAAN,EAAaJ,KAAK,CAALA,KAAb,EAA/B,CAAd,CADkB,EArCC,OAwCnBM,gBAxCmB,CAwCA,iBAAM,OAAKnB,QAAL,CAAc,CAAEkB,QAAQ,CAAE,KAAZ,CAAmBN,aAAa,CAAE,EAAlC,CAAd,CAAN,EAxCA,CAEf,MAAKF,KAAL,CAAa,CACTX,MAAM,CAAE,EADC,CAETa,aAAa,CAAE,EAFN,CAGTM,QAAQ,CAAE,KAHD,CAAb,CAFe,aAOlB,C,gFACmB,CAChB,KAAKrB,WAAL,GACH,C,uCAgCQ,iBACL,MACI,MAAKa,KAAL,CAAWX,MAAX,CAAkBqB,GAAlB,CAAsB,SAAAH,KAAK,CAAI,CAC3B,MACI,4BAAK,SAAS,CAAC,WAAf,EACA,oBAAC,SAAD,EAAW,GAAG,CAAEA,KAAK,CAACZ,EAAtB,CAA0B,KAAK,CAAEY,KAAjC,CAAwC,QAAQ,CAAE,MAAI,CAACb,kBAAvD,EADA,CADJ,CAWH,CAZD,CADJ,CAeH,C,oBA3D+BZ,S,SAAfG,M","sourcesContent":["import React, { Component } from 'react'\nimport { mockApi } from './Services/mockApi'\nimport { MovieCard } from './shared/MovieCard.js'\n// import { Button } from './Shared/Button.js'\n\nexport default class Movies extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            movies: [],\n            movieToDelete: {},\n            toDelete: false,\n        }\n    }\n    componentDidMount() {\n        this.fetchMovies()\n    }\n\n    fetchMovies = async () => {\n        try {\n            const movies = await mockApi.get('/allMovies')\n            this.setState({\n                movies: movies.data\n            })\n        } catch (error) {\n            console.error(error)\n        }\n    }\n\n    handleDeleteMovies = async (id) => {\n        console.log(id)\n        await mockApi.delete(`./allMovies/${id}`).then(() => {\n            const allMovies = this.state.movies\n            allMovies.splice(this.state.movieToDelete.index, 1);\n            this.setState({movies: allMovies})\n            \n        })\n        .then(()=>{\n            this.fetchMovies()\n        })\n        .catch((err) => console.error(err))\n    }\n    \n    handleOpenModal = (movie, index) =>\n    this.setState({ toDelete: true, movieToDelete: {...movie, index}})\n    \n    handleCloseModal = () => this.setState({ toDelete: false, movieToDelete: {} })\n\n    render() {\n        return (\n            this.state.movies.map(movie => {\n                return (\n                    <div className='container'>\n                    <MovieCard key={movie.id} movie={movie} deleteFn={this.handleDeleteMovies}>\n                        \n                    </MovieCard>\n                    </div>\n                    \n                    \n                    \n                        \n                )\n            })\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}